{% extends 'base.html' %}
{% load static %}
{% block title %}Carts{% endblock %}
{% block content %}




{% if not cart_items %}
	<h2 class="text-center">Your Shopping Cart is Empty</h2>
	<br>
	<div class="text-center">
		<a href="{% url 'home' %}" class="btn btn-primary">Continue Shopping</a>
	</div>
{% else %}
    <!-- Cart Section Start -->
    
		<div class="container-fluid my-5">
			<div class="row">
				<div class="col-md-8">
					<h2>Your Cart</h2>
                    {% for cart_item in cart_items %}
                        <div class="cart-item row align-items-center">
                            <div class="col-md-3">
                                <a href="{% url 'product_detail' cart_item.product.slug %}" class="product-image">
                                    <img
                                        src="{{ cart_item.product.images.first.image_path.url }}"
                                        alt="Product Image"
                                        class="img-fluid"
                                    />
                                </a>
                            </div>
                            <div class="col-md-6">
                                <h5>{{ cart_item.product.name }}</h5>
                                <p class="text-muted">Size: M, Color: Blue</p>
                                <p class="font-weight-bold">{{ cart_item.product.price }}</p>
                            </div>
                            <div class="col-md-3">
                                <div class="quantity-controls d-flex align-items-center">
                                     <a href={%url 'remove_cart' cart_item.product.slug%}>                               
                                        <button class="btn btn-sm btn-outline-secondary decrease-button" >
                                        -
                                        </button>
                                    </a>
                                    <input
                                        type="number"
                                        class="form-control form-control-sm quantity-input mx-2"
                                        value="{{ cart_item.quantity }}"
                                        min="1"
                                        style="width: 50px"
                                    />
                                     <a href={% url 'add_cart' cart_item.product.slug%}>  
                                        <button
                                            class="btn btn-sm btn-outline-secondary increase-button"
                                        >
                                            +
                                        </button>
                                    </a>
                                </div>
                                <button class="btn btn-sm btn-danger mt-2">Remove</button>
                            </div>
                        </div>
                    {% endfor %}
					
				</div>
				<div class="col-md-4">
					<div class="card">
						<div class="card-body">
							<h5 class="card-title">Order Summary</h5>
							<hr />
							<div class="d-flex justify-content-between">
								<span>Subtotal</span>
								<span>{{total |floatformat:2}}</span>
							</div>
							<div class="d-flex justify-content-between mt-2">
								<span>Shipping</span>
								<span>{{delivery_charge |floatformat:2}}</span>
							</div>
							<div class="d-flex justify-content-between mt-2">
								<span>Discount</span>
								<span>-{{discount |floatformat:2}}</span>
							</div>
							<hr />
							<div class="d-flex justify-content-between font-weight-bold">
								<span>Total</span>
								<span>{{grand_total |floatformat:2}}</span>
							</div>
							<button
								onclick="window.location.href='checkout.html'"
								class="btn btn-primary btn-block mt-3"
							>
								Proceed to Checkout
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		
    <!-- Cart Section End -->

{%  endif %}
{% endblock %}
